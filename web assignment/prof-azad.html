<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Er. Tawqeer - GCET Guide</title>
    <link rel="stylesheet" href="style.css">
    
</head>
<body>

     <header class="header">
        <div class="header-container">
           <a href="index.html" style="text-decoration: none;">
           <h1 class="logo">GCETian Guide</h1>
           </a>
            <nav class="main-nav">
                <a href="index.html">Home</a>
                 <form id="search-form" class="search">
                <input type="text" id="search-input" placeholder="Search subjects or profs..." ></form>
                <div class="search-icon">
                <i class="user"> User</i>
                </div>
            </nav>
        </div>
    </header>

    <main class="container">
        
        <nav class="breadcrumb">
            <a href="index.html">Home</a> &gt; 
            <a href="cse-semesters.html">CSE</a> &gt; 
            <a href="cse-sem3-subjects.html">Sem 3</a> &gt; 
            <a href="prof-tawqueer.html">Er. Tawqeer</a>
        </nav>

       
        <section class="card subject-header">
            <h2 class="page-title">Er. Yawar Azad</h2>
            <p class="page-subtitle">Professor in Computer Science</p>
            
            <div class="subject-stats">
                <div class="stat-box">
                    <strong>Overall Professor Rating</strong>
                    
                    <span>4.9 / 5</span>
                </div>
            </div>
            <div class="button-group">
                <a href="#" class="button button-primary">Rate this Professor</a>
            </div>
        </section>

       
        <section class="content-wrapper">
            <h3 class="section-title">Subjects Taught</h3>
            <div class="subject-list">
                <a href="#" class="subject-card card">
                    <h4>Web Technology</h4>
                    <p>Semester: 3rd</p>
                    <div class="rating-box">Subject Rating: 4.5 / 5</div>
                </a>
                <a href="#" class="subject-card card">
                    <h4>Data Structures</h4>
                    <p>Semester: 4th (Example)</p>
                    <div class="rating-box">Subject Rating: 4.8 / 5</div>
                </a>
            </div>
        </section>

        <section class="card" style="margin-top: 20px;">
    <h3>Leave a Review</h3>
    <form id="reviewForm">
        <input type="text" id="reviewerName" placeholder="Your Name" required style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 5px;">
        
        <textarea id="reviewText" placeholder="Write your review here..." required style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 5px; height: 80px;"></textarea>
        
        <label>Rating: </label>
        <select id="rating" style="padding: 5px; margin-bottom: 10px;">
            <option value="5">5 Stars</option>
            <option value="4">4 Stars</option>
            <option value="3">3 Stars</option>
            <option value="2">2 Stars</option>
            <option value="1">1 Star</option>
        </select>
        <br>
        <button type="submit" class="button button-primary">Submit Review</button>
    </form>
   </section>

<div id="dynamic-reviews-container"></div>


       
        <section class="review-section">
            <h3 class="section-title">What Students Say </h3>

            <div class="card review-card">
                <div class="review-header review-green">
                    <strong>"Amazing teacher!"</strong>
                    <span class="review-rating">Rating: 5/5</span>
                </div>
                <div class="review-body">
                    <p>"One of the best profs in the department. He makes Web development really easy to understand and is super helpful."</p>
                    <div class="review-meta">
                        <span>10/10/2025</span>
                    </div>
                </div>
            </div>

            <div class="card review-card">
                <div class="review-header review-pink">
                    <strong>"Exam Pattern!"</strong>
                    <span class="review-rating">Rating: 5/5</span>
                </div>
                <div class="review-body">
                    <p>"Exams are theory based, so don't waste your time in coding."</p>
                    <div class="review-meta">
                        <span>10/10/2025</span>
                    </div>
                </div>
            </div>
            
            <div class="card review-card">
                <div class="review-header review-blue">
                    <strong>"Strict but fair"</strong>
                    <span class="review-rating">Rating: 4/5</span>
                </div>
                <div class="review-body">
                    <p>"His classes are engaging , you will definitely learn. He really knows his stuff."</p>
                    <div class="review-meta">
                        <span>08/10/2025</span>
                    </div>
                </div>
            </div>

        </section>

    </main>

    <footer class="footer">
        <i>&copy; 2025 GCET Guide. Made by Bhoomija Sharma.</i>
    </footer>
    <script>
    // CHANGED: Pointing to the PHP file in your XAMPP folder
    const API_URL = "http://localhost/web-assignment/backend.php";

    // Function to fetch and display reviews
    async function loadReviews() {
        try {
            const response = await fetch(API_URL);
            const reviews = await response.json();
            
            const container = document.getElementById('dynamic-reviews-container');
            // Clear old reviews if needed, or append new ones
            // container.innerHTML = ''; 

            reviews.forEach(review => {
                // Note: The database column names are slightly different (review_text, review_date)
                const reviewHTML = `
                    <div class="card review-card" style="margin-top: 15px;">
                        <div class="review-header review-blue">
                            <strong>${review.name}</strong>
                            <span class="review-rating">Rating: ${review.rating}/5</span>
                        </div>
                        <div class="review-body">
                            <p>"${review.review_text}"</p>
                            <div class="review-meta">
                                <span>${review.review_date}</span>
                            </div>
                        </div>
                    </div>
                `;
                container.insertAdjacentHTML('afterbegin', reviewHTML);
            });
        } catch (error) {
            console.error("Could not load reviews:", error);
        }
    }

    // Function to handle form submit
    document.getElementById('reviewForm').addEventListener('submit', async (e) => {
        e.preventDefault();

        const name = document.getElementById('reviewerName').value;
        const text = document.getElementById('reviewText').value;
        const rating = document.getElementById('rating').value;

        // Create the data object
        const newReview = { name: name, text: text, rating: rating };

        try {
            const response = await fetch(API_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(newReview)
            });

            if (response.ok) {
                alert("Review submitted!");
                document.getElementById('reviewForm').reset();
                location.reload(); 
            } else {
                alert("Server error");
            }
        } catch (error) {
            console.error("Error:", error);
            alert("Could not connect to PHP server.");
        }
    });

    // Load reviews when page opens
    loadReviews();
</script>
    
</body>

</html>
